module.exports=[77782,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(46504)},8649,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},53565,a=>{"use strict";var b=a.i(96350);function c(){if(!process.env.SUPABASE_SERVICE_ROLE_KEY)throw Error("Missing Supabase Service Role Key");return(0,b.createClient)("https://mrqzlmkdhzwvbpljikjz.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}})}a.s(["createAdminClient",()=>c])},33198,a=>{"use strict";var b=a.i(77782),c=a.i(2669),d=a.i(53565),e=a.i(46235);async function f(a,b){let f=await (0,c.createClient)(),g=(0,d.createAdminClient)(),{data:{user:h}}=await f.auth.getUser();if(!h)throw Error("Unauthorized");let{data:i,error:j}=await f.from("admissions").select("*").eq("id",a).eq("user_id",h.id).single();if(j||!i)throw Error("Offer not found");if("PENDING"!==i.offer_status)throw Error("You have already submitted a response to this offer.");let k={offer_status:b};"ACCEPTED"===b&&(k.accepted_at=new Date().toISOString());let{error:l}=await g.from("admissions").update(k).eq("id",a);if(l)throw console.error("Error updating offer response:",l),console.error("Update data:",k),console.error("Admission ID:",a),Error(`Failed to save your decision: ${l.message}`);return"ACCEPTED"===b?await g.from("applications").update({status:"OFFER_ACCEPTED"}).eq("user_id",h.id).eq("status","ADMITTED"):(await g.from("applications").update({status:"OFFER_DECLINED"}).eq("user_id",h.id).eq("status","ADMITTED"),console.log(`Admin notified: Student ${h.id} rejected offer for admission ${a}`)),(0,e.revalidatePath)("/portal/student/offer"),(0,e.revalidatePath)("/portal/dashboard"),{success:!0}}(0,a.i(8649).ensureServerEntryExports)([f]),(0,b.registerServerReference)(f,"60c989dc463a9a153e1388f118bd754cac19e439a1",null),a.s([],23505),a.i(23505),a.s(["60c989dc463a9a153e1388f118bd754cac19e439a1",()=>f],33198)}];

//# sourceMappingURL=OneDrive_Documents_syklicollege_a141a4c8._.js.map