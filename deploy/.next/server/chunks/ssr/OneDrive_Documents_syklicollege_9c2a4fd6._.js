module.exports=[77782,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"registerServerReference",{enumerable:!0,get:function(){return d.registerServerReference}});let d=a.r(46504)},8649,(a,b,c)=>{"use strict";function d(a){for(let b=0;b<a.length;b++){let c=a[b];if("function"!=typeof c)throw Object.defineProperty(Error(`A "use server" file can only export async functions, found ${typeof c}.
Read more: https://nextjs.org/docs/messages/invalid-use-server-value`),"__NEXT_ERROR_CODE",{value:"E352",enumerable:!1,configurable:!0})}}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"ensureServerEntryExports",{enumerable:!0,get:function(){return d}})},53565,a=>{"use strict";var b=a.i(96350);function c(){if(!process.env.SUPABASE_SERVICE_ROLE_KEY)throw Error("Missing Supabase Service Role Key");return(0,b.createClient)("https://mrqzlmkdhzwvbpljikjz.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}})}a.s(["createAdminClient",()=>c])},21914,a=>{"use strict";var b=a.i(77782),c=a.i(2669),d=a.i(53565),e=a.i(46235);a.i(75325);var f=a.i(17781);async function g(a,b="content"){if(!a||0===a.size)return null;let d=await (0,c.createClient)(),e=a.name.split(".").pop(),f=`${Math.random().toString(36).substring(2)}.${e}`,h=`${f}`,{error:i,data:j}=await d.storage.from(b).upload(h,a);if(i)throw Error(i.message);let{data:{publicUrl:k}}=d.storage.from(b).getPublicUrl(h);return k}async function h(a){let b=await (0,c.createClient)(),d=a.get("title"),g=a.get("slug"),h=a.get("degreeLevel"),i=a.get("schoolId"),{error:j}=await b.from("Course").insert({title:d,slug:g,degreeLevel:h,schoolId:i,duration:a.get("duration")||"3 years",language:a.get("language")||"English",description:a.get("description"),tuitionFee:a.get("tuitionFee"),credits:parseInt(a.get("credits"))||0});if(j)throw Error(j.message);(0,e.revalidatePath)("/admin/courses"),(0,f.redirect)("/admin/courses")}async function i(a,b){let d=await (0,c.createClient)(),{error:g}=await d.from("Course").update({title:b.get("title"),slug:b.get("slug"),degreeLevel:b.get("degreeLevel"),schoolId:b.get("schoolId"),duration:b.get("duration"),language:b.get("language"),description:b.get("description"),tuitionFee:b.get("tuitionFee"),credits:parseInt(b.get("credits"))||0}).eq("id",a);if(g)throw Error(g.message);(0,e.revalidatePath)("/admin/courses"),(0,e.revalidatePath)(`/admin/courses/${a}`),(0,f.redirect)("/admin/courses")}async function j(a){let b=await (0,c.createClient)(),{error:d}=await b.from("Course").delete().eq("id",a);if(d)throw Error(d.message);(0,e.revalidatePath)("/admin/courses")}async function k(a){let b=await (0,c.createClient)(),d=a.get("title"),h=a.get("slug"),i=a.get("content"),j=a.get("image"),k=a.get("publishDate")||new Date().toISOString(),l=await g(j),{error:m}=await b.from("News").insert({title:d,slug:h,content:i,imageUrl:l,publishDate:k,published:"true"===a.get("published")});if(m)throw Error(m.message);(0,e.revalidatePath)("/admin/news"),(0,e.revalidatePath)("/news"),(0,e.revalidatePath)("/"),(0,f.redirect)("/admin/news")}async function l(a,b){let d=await (0,c.createClient)(),h=b.get("image"),i=await g(h),j={title:b.get("title"),slug:b.get("slug"),content:b.get("content"),publishDate:b.get("publishDate")};i&&(j.imageUrl=i);let{error:k}=await d.from("News").update(j).eq("id",a);if(k)throw Error(k.message);(0,e.revalidatePath)("/admin/news"),(0,e.revalidatePath)("/news"),(0,e.revalidatePath)("/"),(0,e.revalidatePath)(`/news/${a}`),(0,f.redirect)("/admin/news")}async function m(a){let b=await (0,c.createClient)(),{error:d}=await b.from("News").delete().eq("id",a);if(d)throw Error(d.message);(0,e.revalidatePath)("/admin/news"),(0,e.revalidatePath)("/news"),(0,e.revalidatePath)("/")}async function n(a){let b=await (0,c.createClient)(),d=a.get("image"),h=await g(d),{error:i}=await b.from("Event").insert({title:a.get("title"),slug:a.get("slug"),date:a.get("date"),location:a.get("location"),category:a.get("category"),content:a.get("content"),imageUrl:h,published:!0});if(i)throw Error(i.message);(0,e.revalidatePath)("/admin/events"),(0,e.revalidatePath)("/events"),(0,e.revalidatePath)("/"),(0,f.redirect)("/admin/events")}async function o(a,b){let d=await (0,c.createClient)(),h=b.get("image"),i=await g(h),j={title:b.get("title"),slug:b.get("slug"),date:b.get("date"),location:b.get("location"),category:b.get("category"),content:b.get("content")};i&&(j.imageUrl=i);let{error:k}=await d.from("Event").update(j).eq("id",a);if(k)throw Error(k.message);(0,e.revalidatePath)("/admin/events"),(0,e.revalidatePath)("/events"),(0,e.revalidatePath)("/"),(0,f.redirect)("/admin/events")}async function p(a){let b=await (0,c.createClient)(),{error:d}=await b.from("Event").delete().eq("id",a);if(d)throw Error(d.message);(0,e.revalidatePath)("/admin/events"),(0,e.revalidatePath)("/events"),(0,e.revalidatePath)("/")}async function q(a){let b=await (0,c.createClient)(),{error:d}=await b.from("Subject").insert({name:a.get("name"),creditUnits:parseInt(a.get("creditUnits"))||5,semester:parseInt(a.get("semester"))||1,courseId:a.get("courseId"),code:a.get("code"),area:a.get("area")});if(d)throw Error(d.message);(0,e.revalidatePath)("/admin/subjects"),(0,f.redirect)("/admin/subjects")}async function r(a,b){let d=await (0,c.createClient)(),{error:g}=await d.from("Subject").update({name:b.get("name"),creditUnits:parseInt(b.get("creditUnits"))||5,semester:parseInt(b.get("semester"))||1,courseId:b.get("courseId"),code:b.get("code"),area:b.get("area")}).eq("id",a);if(g)throw Error(g.message);(0,e.revalidatePath)("/admin/subjects"),(0,f.redirect)("/admin/subjects")}async function s(a){let b=await (0,c.createClient)(),{error:d}=await b.from("Subject").delete().eq("id",a);if(d)throw Error(d.message);(0,e.revalidatePath)("/admin/subjects")}async function t(a,b){let d=await (0,c.createClient)(),{error:f}=await d.from("Student").update({status:b}).eq("id",a);if(f)throw Error(f.message);(0,e.revalidatePath)("/admin/students")}async function u(a,b){let d=await (0,c.createClient)(),f="true"===b.get("tuitionPaid"),g=b.get("tuitionAmount"),{error:h}=await d.from("Student").update({tuitionPaid:f,tuitionAmount:g,paymentDate:f?new Date().toISOString():null}).eq("id",a);if(h)throw Error(h.message);(0,e.revalidatePath)("/admin/students")}async function v(a){let b=(0,d.createAdminClient)(),{error:c}=await b.from("module_enrollments").delete().eq("student_id",a);if(c)throw Error(`Failed to clear enrollments: ${c.message}`);let{error:f}=await b.from("students").delete().eq("id",a);if(f)throw Error(f.message);(0,e.revalidatePath)("/admin/students")}async function w(a){let b=await (0,c.createClient)(),d=a.get("image"),h=await g(d),{error:i}=await b.from("Faculty").insert({name:a.get("name"),role:a.get("role"),bio:a.get("bio"),email:a.get("email"),schoolId:a.get("schoolId"),departmentId:a.get("departmentId")||null,imageUrl:h});if(i)throw Error(i.message);(0,e.revalidatePath)("/admin/faculty"),(0,e.revalidatePath)("/schools/arts"),(0,e.revalidatePath)("/schools/[slug]","layout"),(0,f.redirect)("/admin/faculty")}async function x(a,b){let d=await (0,c.createClient)(),h=b.get("image"),i=await g(h),j={name:b.get("name"),role:b.get("role"),bio:b.get("bio"),email:b.get("email"),schoolId:b.get("schoolId"),departmentId:b.get("departmentId")||null};i&&(j.imageUrl=i);let{error:k}=await d.from("Faculty").update(j).eq("id",a);if(k)throw Error(k.message);(0,e.revalidatePath)("/admin/faculty"),(0,e.revalidatePath)("/schools/arts"),(0,e.revalidatePath)("/schools/[slug]","layout"),(0,f.redirect)("/admin/faculty")}async function y(a){let b=await (0,c.createClient)(),{error:d}=await b.from("Faculty").delete().eq("id",a);if(d)throw Error(d.message);(0,e.revalidatePath)("/admin/faculty"),(0,e.revalidatePath)("/schools/arts"),(0,e.revalidatePath)("/schools/[slug]","layout")}async function z(b){let f=await (0,c.createClient)(),g=(0,d.createAdminClient)(),{data:h}=await f.from("applications").select("*, offer:admission_offers(*)").eq("id",b).single();if(!h||!h.offer?.[0])throw Error("Application or Offer not found");let i=h.offer[0],{data:j}=await f.from("tuition_payments").select("*").eq("offer_id",i.id).single();j?"COMPLETED"!==j.status&&await g.from("tuition_payments").update({status:"COMPLETED"}).eq("id",j.id):await g.from("tuition_payments").insert({offer_id:i.id,amount:i.tuition_fee,status:"COMPLETED",payment_method:"MANUAL_ADMIN_OVERRIDE",transaction_reference:`MANUAL-${new Date().getTime()}`});let{confirmEnrollment:k}=await a.A(91073),l=await k(b);if(!l.success)throw Error(l.error||"Enrollment failed");(0,e.revalidatePath)("/admin/students")}async function A(a){console.log("SERVER ACTION: createResearchProject called");try{let b=await (0,c.createClient)(),d=a.get("image"),e=await g(d),{error:f}=await b.from("ResearchProject").insert({title:a.get("title"),slug:a.get("slug"),leadResearcher:a.get("leadResearcher"),fundingSource:a.get("fundingSource"),description:a.get("description"),content:a.get("content"),imageUrl:e});if(f)throw Error(f.message)}catch(a){throw console.error("Create Research Project Error:",a),Error(a.message)}(0,e.revalidatePath)("/admin/research/projects"),(0,e.revalidatePath)("/research/projects"),(0,f.redirect)("/admin/research/projects")}async function B(a,b){try{console.log("SERVER ACTION: updateResearchProject",a);let d=await (0,c.createClient)(),e=b.get("image");console.log("Image from FormData:",{name:e?.name,size:e?.size,type:e?.type});let f=await g(e);console.log("Uploaded Image URL:",f);let h={title:b.get("title"),slug:b.get("slug"),leadResearcher:b.get("leadResearcher"),fundingSource:b.get("fundingSource"),description:b.get("description"),content:b.get("content"),updatedAt:new Date().toISOString()};f?(console.log("Updating imageUrl in DB to:",f),h.imageUrl=f):console.log("No new image uploaded, keeping existing.");let{error:i}=await d.from("ResearchProject").update(h).eq("id",a);if(i)throw Error(i.message)}catch(a){throw console.error("Update Research Project Error:",a),Error(a.message)}(0,e.revalidatePath)("/admin/research/projects"),(0,e.revalidatePath)("/research/projects"),(0,f.redirect)("/admin/research/projects")}async function C(a){let b=a.get("id"),d=await (0,c.createClient)(),{error:f}=await d.from("ResearchProject").delete().eq("id",b);if(f)throw Error(f.message);(0,e.revalidatePath)("/admin/research/projects"),(0,e.revalidatePath)("/research/projects")}(0,a.i(8649).ensureServerEntryExports)([h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C]),(0,b.registerServerReference)(h,"40c4f6cecb415f91dccfdf4b6804ad7d408b93d302",null),(0,b.registerServerReference)(i,"606bb119db4d01508dd9a0e9d4cae341d60be8d638",null),(0,b.registerServerReference)(j,"40e06727a6ec98ad908a0e2c2f18b1b1f110a03ea5",null),(0,b.registerServerReference)(k,"4013c675e4dedebb589f5e4819dd96e0e4f68b79eb",null),(0,b.registerServerReference)(l,"605cd578a609d9fa9be450c74fe73b502a39e63d86",null),(0,b.registerServerReference)(m,"4069757fa481d073818e16ce3b53a4c65cc604f3d6",null),(0,b.registerServerReference)(n,"4086c35e787f554e2bd02c3c6df7fd8b0962497ad0",null),(0,b.registerServerReference)(o,"60b87372ef299d4233c31dd6810e1948f1328c8d50",null),(0,b.registerServerReference)(p,"40645e073b962afd65040b994b1826fd74d761b568",null),(0,b.registerServerReference)(q,"40bd5e3815bc037f424117d3e6ce57ee165d17070d",null),(0,b.registerServerReference)(r,"602a2b5389c973210a5dd1c205aab96bf9fbf0a3b8",null),(0,b.registerServerReference)(s,"4018e75f34490ef6a424f8b0bf41893c8302f205c5",null),(0,b.registerServerReference)(t,"60dabbb28c637e84cb3e014d4e5af6dc5a3c3cd2fa",null),(0,b.registerServerReference)(u,"60e541f372ee312a0e08d67be1e73647cf49309c4b",null),(0,b.registerServerReference)(v,"4016e22860391f57bb05f62130bd888de85a18477d",null),(0,b.registerServerReference)(w,"40945c12ae9e6e704fa4a20b28cb7c34d10f70340c",null),(0,b.registerServerReference)(x,"6098d41a2e8c7b0fc1854e84bfc5aff6341b86c215",null),(0,b.registerServerReference)(y,"409185f09b37b2209c4d3a6d2df75a0e0fd895b0c2",null),(0,b.registerServerReference)(z,"40b47784dc36f7651e793601228847fdcaf936d366",null),(0,b.registerServerReference)(A,"408ca9c7d3ad6e9c8e5125e1352da6f602fb6dfa3f",null),(0,b.registerServerReference)(B,"60292347994a66ea1084d491bd60af178761ee958d",null),(0,b.registerServerReference)(C,"40deceded8eb478c7ef2c4898ac99c758b7f8d8143",null),a.s(["adminApproveTuition",()=>z,"createCourse",()=>h,"createEvent",()=>n,"createFaculty",()=>w,"createNews",()=>k,"createResearchProject",()=>A,"createSubject",()=>q,"deleteCourse",()=>j,"deleteEvent",()=>p,"deleteFaculty",()=>y,"deleteNews",()=>m,"deleteResearchProject",()=>C,"deleteStudent",()=>v,"deleteSubject",()=>s,"updateCourse",()=>i,"updateEvent",()=>o,"updateFaculty",()=>x,"updateNews",()=>l,"updateResearchProject",()=>B,"updateStudentStatus",()=>t,"updateStudentTuition",()=>u,"updateSubject",()=>r])},38222,a=>{"use strict";var b=a.i(21914);a.s([],33628),a.i(33628),a.s(["409185f09b37b2209c4d3a6d2df75a0e0fd895b0c2",()=>b.deleteFaculty],38222)},91073,a=>{a.v(b=>Promise.all(["server/chunks/ssr/OneDrive_Documents_syklicollege_src_app_portal_295da7ac._.js"].map(b=>a.l(b))).then(()=>b(33199)))}];

//# sourceMappingURL=OneDrive_Documents_syklicollege_9c2a4fd6._.js.map