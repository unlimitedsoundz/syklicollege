module.exports=[2819,a=>{"use strict";var b=a.i(47242),c=a.i(5177),d=a.i(84531),e=a.i(55205),f=a.i(15492);let g=c.forwardRef((a,b)=>c.createElement(e.default,{ref:b,...a,weights:f.default}));g.displayName="TrendUpIcon";var h=a.i(85890),i=a.i(53594),j=a.i(20484),k=a.i(35717),l=a.i(84359),m=a.i(28713),n=a.i(37569);let o=(0,n.createServerReference)("606ac5be30d99642bf968cc4560d413c12924b1b07",n.callServer,void 0,n.findSourceMapURL,"batchGenerateInvoices"),p=(0,n.createServerReference)("408a81e780507581004e0e5454a064703f06f6ddf8",n.callServer,void 0,n.findSourceMapURL,"reconcilePayment"),q=(0,n.createServerReference)("701294a399a30dc2c539a178ef7a090c8a82c06c3e",n.callServer,void 0,n.findSourceMapURL,"generateHousingInvoice"),r=(0,n.createServerReference)("40705f306876d039df0bfb029e22be448dc91162ee",n.callServer,void 0,n.findSourceMapURL,"searchStudents");function s({initialInvoices:a,initialPayments:e,students:f}){let[n,s]=(0,c.useState)(a),[t,u]=(0,c.useState)(e),[v,w]=(0,c.useState)("invoices"),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)("ALL"),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(new Date().getMonth()+1),[H,I]=(0,c.useState)(new Date().getFullYear()),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)("HOUSING_DEPOSIT"),[T,U]=(0,c.useState)(""),[V,W]=(0,c.useState)(f),X={totalRevenue:t.filter(a=>"COMPLETED"===a.status).reduce((a,b)=>a+Number(b.amount),0),pendingInvoices:n.filter(a=>"PENDING"===a.status).length,totalInvoiced:n.reduce((a,b)=>a+Number(b.total_amount),0),completionRate:n.length>0?Math.round(n.filter(a=>"PAID"===a.status).length/n.length*100):0},Y=n.filter(a=>{let b=a.reference_number.toLowerCase().includes(x.toLowerCase())||`${a.student?.user?.first_name} ${a.student?.user?.last_name}`.toLowerCase().includes(x.toLowerCase()),c="ALL"===z||a.status===z;return b&&c}),Z=t.filter(a=>{let b=a.paygowire_transaction_id?.toLowerCase().includes(x.toLowerCase())||`${a.student?.user?.first_name} ${a.student?.user?.last_name}`.toLowerCase().includes(x.toLowerCase()),c="ALL"===z||a.status===z;return b&&c}),$=async()=>{C(!0);try{let a=await o(F,H);a.success&&(alert(`Successfully generated ${a.count} invoices.`),E(!1),window.location.reload())}catch(a){alert(a.message)}finally{C(!1)}},_=async a=>{if(confirm("Are you sure you want to manually reconcile this payment?")){C(!0);try{(await p(a)).success&&(alert("Payment reconciled successfully."),window.location.reload())}catch(a){alert(a.message)}finally{C(!1)}}},aa=a=>{switch(a){case"PAID":case"COMPLETED":return"bg-green-100 text-green-700 border-green-200";case"PENDING":case"PROCESSING":return"bg-amber-100 text-amber-700 border-amber-200";case"FAILED":case"CANCELLED":case"OVERDUE":return"bg-red-100 text-red-700 border-red-200";default:return"bg-neutral-100 text-neutral-700 border-neutral-200"}};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-black uppercase tracking-tighter mb-1",children:"Finance Console"}),(0,b.jsx)("p",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-widest",children:"Housing Payments & Invoice Management"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>K(!0),className:"px-4 py-2 border-2 border-black text-black rounded-sm text-[10px] font-black uppercase tracking-widest hover:bg-neutral-50 transition-all",children:"New Individual Invoice"}),(0,b.jsx)("button",{onClick:()=>E(!0),className:"px-4 py-2 bg-black text-white rounded-sm text-[10px] font-black uppercase tracking-widest hover:bg-neutral-800 transition-all",children:"Generate Batch Invoices"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white border-2 border-black p-6 rounded-sm shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)]",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsx)(g,{size:20,weight:"bold",className:"text-neutral-400"}),(0,b.jsx)("span",{className:"text-[8px] font-black uppercase text-green-600 bg-green-50 px-2 py-0.5 rounded-full",children:"+12% vs last mo"})]}),(0,b.jsx)("p",{className:"text-[10px] font-black uppercase text-neutral-400 mb-1",children:"Total Revenue"}),(0,b.jsxs)("p",{className:"text-2xl font-black",children:["€",X.totalRevenue.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"bg-white border-2 border-black p-6 rounded-sm shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)]",children:[(0,b.jsx)(i.Clock,{size:20,weight:"bold",className:"text-amber-500 mb-2"}),(0,b.jsx)("p",{className:"text-[10px] font-black uppercase text-neutral-400 mb-1",children:"Pending Invoices"}),(0,b.jsx)("p",{className:"text-2xl font-black",children:X.pendingInvoices})]}),(0,b.jsxs)("div",{className:"bg-white border-2 border-black p-6 rounded-sm shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)]",children:[(0,b.jsx)(d.FileText,{size:20,weight:"bold",className:"text-neutral-400 mb-2"}),(0,b.jsx)("p",{className:"text-[10px] font-black uppercase text-neutral-400 mb-1",children:"Total Invoiced"}),(0,b.jsxs)("p",{className:"text-2xl font-black",children:["€",X.totalInvoiced.toLocaleString()]})]}),(0,b.jsxs)("div",{className:"bg-white border-2 border-black p-6 rounded-sm shadow-[4px_4px_0px_0px_rgba(0,0,0,0.1)]",children:[(0,b.jsx)(h.CheckCircle,{size:20,weight:"bold",className:"text-neutral-400 mb-2"}),(0,b.jsx)("p",{className:"text-[10px] font-black uppercase text-neutral-400 mb-1",children:"Collection Rate"}),(0,b.jsxs)("p",{className:"text-2xl font-black",children:[X.completionRate,"%"]})]})]}),(0,b.jsxs)("div",{className:"bg-white border-2 border-black p-4 rounded-sm flex flex-col md:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(k.MagnifyingGlass,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",size:16,weight:"bold"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by student or reference...",className:"w-full pl-10 pr-4 py-2 border-2 border-neutral-100 focus:border-black outline-none transition-all text-sm font-bold uppercase",value:x,onChange:a=>y(a.target.value)})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsxs)("select",{className:"px-4 py-2 border-2 border-neutral-100 focus:border-black outline-none transition-all text-[10px] font-black uppercase tracking-widest bg-white",value:z,onChange:a=>A(a.target.value),children:[(0,b.jsx)("option",{value:"ALL",children:"All Status"}),(0,b.jsx)("option",{value:"PENDING",children:"Pending"}),(0,b.jsx)("option",{value:"PAID",children:"Paid"}),(0,b.jsx)("option",{value:"CANCELLED",children:"Cancelled"}),(0,b.jsx)("option",{value:"OVERDUE",children:"Overdue"})]})})]}),(0,b.jsx)("div",{className:"border-b-2 border-neutral-200",children:(0,b.jsxs)("div",{className:"flex gap-8",children:[(0,b.jsxs)("button",{onClick:()=>w("invoices"),className:`pb-4 text-[10px] font-black uppercase tracking-widest transition-all relative ${"invoices"===v?"text-black":"text-neutral-400 hover:text-neutral-600"}`,children:["Invoices","invoices"===v&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-black"})]}),(0,b.jsxs)("button",{onClick:()=>w("payments"),className:`pb-4 text-[10px] font-black uppercase tracking-widest transition-all relative ${"payments"===v?"text-black":"text-neutral-400 hover:text-neutral-600"}`,children:["Payments","payments"===v&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-black"})]})]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full border-collapse",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b-2 border-black",children:[(0,b.jsx)("th",{className:"text-left py-4 px-2 text-[10px] font-black uppercase tracking-widest text-neutral-400",children:"Reference / ID"}),(0,b.jsx)("th",{className:"text-left py-4 px-2 text-[10px] font-black uppercase tracking-widest text-neutral-400",children:"Student"}),(0,b.jsx)("th",{className:"text-left py-4 px-2 text-[10px] font-black uppercase tracking-widest text-neutral-400",children:"Amount"}),(0,b.jsx)("th",{className:"text-left py-4 px-2 text-[10px] font-black uppercase tracking-widest text-neutral-400",children:"Status"}),(0,b.jsx)("th",{className:"text-left py-4 px-2 text-[10px] font-black uppercase tracking-widest text-neutral-400",children:"Date"}),(0,b.jsx)("th",{className:"text-right py-4 px-2 text-[10px] font-black uppercase tracking-widest text-neutral-400",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:"invoices"===v?Y.map(a=>(0,b.jsxs)("tr",{className:"border-b border-neutral-100 hover:bg-neutral-50 transition-colors",children:[(0,b.jsx)("td",{className:"py-4 px-2",children:(0,b.jsx)("p",{className:"font-black text-sm",children:a.reference_number})}),(0,b.jsxs)("td",{className:"py-4 px-2",children:[(0,b.jsxs)("p",{className:"font-bold text-sm",children:[a.student?.user?.first_name," ",a.student?.user?.last_name]}),(0,b.jsxs)("p",{className:"text-[8px] font-bold text-neutral-400 uppercase",children:["ID: ",a.student?.id]})]}),(0,b.jsx)("td",{className:"py-4 px-2",children:(0,b.jsxs)("p",{className:"font-black",children:["€",Number(a.total_amount).toLocaleString()]})}),(0,b.jsx)("td",{className:"py-4 px-2",children:(0,b.jsx)("span",{className:`px-2 py-1 border-2 rounded-sm text-[8px] font-black uppercase ${aa(a.status)}`,children:a.status})}),(0,b.jsx)("td",{className:"py-4 px-2 text-[10px] font-bold text-neutral-500 uppercase",children:(0,m.formatToDDMMYYYY)(a.created_at)}),(0,b.jsx)("td",{className:"py-4 px-2 text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{className:"p-2 border border-neutral-200 rounded-sm hover:border-black transition-all",children:(0,b.jsx)(j.WarningCircle,{size:14,weight:"bold"})}),(0,b.jsx)("button",{className:"p-2 border border-neutral-200 rounded-sm hover:border-black transition-all",children:(0,b.jsx)(l.ArrowRight,{size:14,weight:"bold"})})]})})]},a.id)):Z.map(a=>(0,b.jsxs)("tr",{className:"border-b border-neutral-100 hover:bg-neutral-50 transition-colors",children:[(0,b.jsxs)("td",{className:"py-4 px-2",children:[(0,b.jsx)("p",{className:"font-black text-sm truncate max-w-[120px]",children:a.paygowire_transaction_id||a.id.slice(0,8)}),(0,b.jsx)("p",{className:"text-[8px] font-bold text-neutral-400 uppercase",children:a.invoice?.reference_number})]}),(0,b.jsxs)("td",{className:"py-4 px-2",children:[(0,b.jsxs)("p",{className:"font-bold text-sm",children:[a.student?.user?.first_name," ",a.student?.user?.last_name]}),(0,b.jsxs)("p",{className:"text-[8px] font-bold text-neutral-400 uppercase",children:["Method: ",a.payment_method]})]}),(0,b.jsx)("td",{className:"py-4 px-2",children:(0,b.jsxs)("p",{className:"font-black",children:["€",Number(a.amount).toLocaleString()]})}),(0,b.jsx)("td",{className:"py-4 px-2",children:(0,b.jsx)("span",{className:`px-2 py-1 border-2 rounded-sm text-[8px] font-black uppercase ${aa(a.status)}`,children:a.status})}),(0,b.jsx)("td",{className:"py-4 px-2 text-[10px] font-bold text-neutral-500 uppercase",children:(0,m.formatToDDMMYYYY)(a.created_at)}),(0,b.jsx)("td",{className:"py-4 px-2 text-right",children:(0,b.jsx)("button",{onClick:()=>_(a.id),disabled:"COMPLETED"===a.status||B,className:"p-2 border border-neutral-200 rounded-sm hover:border-green-500 hover:text-green-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)(h.CheckCircle,{size:14,weight:"bold"})})})]},a.id))})]})}),0===("invoices"===v?Y:Z).length&&(0,b.jsx)("div",{className:"py-20 text-center bg-white border-2 border-dashed border-neutral-200 rounded-sm",children:(0,b.jsx)("p",{className:"text-neutral-400 font-bold uppercase tracking-widest text-xs",children:"No records found matching your filters."})}),D&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white border-4 border-black p-8 max-w-md w-full shadow-[8px_8px_0px_0px_rgba(0,0,0,1)]",children:[(0,b.jsx)("h2",{className:"text-xl font-black uppercase mb-4",children:"Batch Invoice Generation"}),(0,b.jsx)("p",{className:"text-sm text-neutral-600 mb-6 font-bold uppercase tracking-tight",children:"Select the month and year to generate rent invoices for all active housing assignments."}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[10px] font-black uppercase text-neutral-400 mb-1",children:"Month"}),(0,b.jsx)("select",{className:"w-full px-2 py-1 border-2 border-black font-bold outline-none",value:F,onChange:a=>G(Number(a.target.value)),children:Array.from({length:12},(a,c)=>(0,b.jsx)("option",{value:c+1,children:new Intl.DateTimeFormat("en-US",{month:"long"}).format(new Date(2026,c))},c+1))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[10px] font-black uppercase text-neutral-400 mb-1",children:"Year"}),(0,b.jsxs)("select",{className:"w-full px-2 py-1 border-2 border-black font-bold outline-none",value:H,onChange:a=>I(Number(a.target.value)),children:[(0,b.jsx)("option",{value:2026,children:"2026"}),(0,b.jsx)("option",{value:2027,children:"2027"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{onClick:()=>E(!1),className:"flex-1 py-3 border-2 border-black text-[10px] font-black uppercase tracking-widest hover:bg-neutral-100 transition-all",children:"Cancel"}),(0,b.jsx)("button",{onClick:$,disabled:B,className:"flex-1 py-3 bg-black text-white text-[10px] font-black uppercase tracking-widest hover:bg-neutral-800 transition-all disabled:opacity-50",children:B?"Generating...":"Run Batch"})]})]})}),J&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white border-4 border-black p-8 max-w-lg w-full shadow-[8px_8px_0px_0px_rgba(0,0,0,1)]",children:[(0,b.jsx)("h2",{className:"text-xl font-black uppercase mb-4",children:"Create Individual Invoice"}),(0,b.jsx)("p",{className:"text-sm text-neutral-600 mb-6 font-bold uppercase tracking-tight",children:"Generate a custom invoice for a specific student."}),(0,b.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[10px] font-black uppercase text-neutral-400 mb-1",children:"Select Student"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",placeholder:"Search by name or ID...",className:"w-full px-4 py-3 border-2 border-black font-bold outline-none mb-2",value:T,onChange:async a=>{U(a.target.value),a.target.value.length>2?W(await r(a.target.value)):0===a.target.value.length&&W(f)}}),T&&""===L&&(0,b.jsx)("div",{className:"bg-white border-2 border-black max-h-40 overflow-y-auto mb-4",children:V.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>{M(a.id),U(`${a.user?.first_name} ${a.user?.last_name}`),W([])},className:`w-full text-left px-4 py-2 text-xs font-bold uppercase hover:bg-neutral-50 ${L===a.id?"bg-neutral-100":""}`,children:[a.user?.first_name," ",a.user?.last_name," (",a.student_id,")"]},a.id))}),L&&(0,b.jsx)("button",{onClick:()=>{M(""),U(""),W(f)},className:"text-[8px] font-bold text-red-500 uppercase tracking-widest mt-1 hover:underline",children:"Change Student"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[10px] font-black uppercase text-neutral-400 mb-1",children:"Amount (€)"}),(0,b.jsx)("input",{type:"number",className:"w-full px-4 py-3 border-2 border-black font-bold outline-none",placeholder:"0.00",value:N,onChange:a=>O(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[10px] font-black uppercase text-neutral-400 mb-1",children:"Type"}),(0,b.jsxs)("select",{className:"w-full px-4 py-3 border-2 border-black font-bold outline-none bg-white",value:R,onChange:a=>S(a.target.value),children:[(0,b.jsx)("option",{value:"HOUSING_DEPOSIT",children:"Deposit"}),(0,b.jsx)("option",{value:"MONTHLY_RENT",children:"Monthly Rent"}),(0,b.jsx)("option",{value:"UTILITIES",children:"Utilities"}),(0,b.jsx)("option",{value:"CLEANING_FEE",children:"Cleaning Fee"}),(0,b.jsx)("option",{value:"LATE_FEE",children:"Late Fee"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-[10px] font-black uppercase text-neutral-400 mb-1",children:"Description"}),(0,b.jsx)("textarea",{className:"w-full px-4 py-3 border-2 border-black font-bold outline-none",rows:2,placeholder:"e.g., Security Deposit for Block A",value:P,onChange:a=>Q(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("button",{onClick:()=>{K(!1),M(""),U(""),O(""),Q("")},className:"flex-1 py-3 border-2 border-black text-[10px] font-black uppercase tracking-widest hover:bg-neutral-100 transition-all",children:"Cancel"}),(0,b.jsx)("button",{onClick:async()=>{if(!L||!N||!P)return void alert("Please fill all fields");C(!0);try{await q(L,null,[{description:P,type:R,amount:Number(N)}]),alert("Invoice generated successfully"),window.location.reload()}catch(a){alert(a.message)}finally{C(!1)}},disabled:B,className:"flex-1 py-3 bg-black text-white text-[10px] font-black uppercase tracking-widest hover:bg-neutral-800 transition-all disabled:opacity-50",children:B?"Generating...":"Create Invoice"})]})]})})]})}a.s(["default",()=>s],2819)}];

//# sourceMappingURL=1b41d_syklicollege_src_app_admin_housing_finance_FinanceManagementClient_tsx_ef496644._.js.map